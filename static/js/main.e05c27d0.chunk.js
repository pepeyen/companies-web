(this["webpackJsonpcompanies-web"]=this["webpackJsonpcompanies-web"]||[]).push([[0],{22:function(e,t,a){e.exports=a(39)},27:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(15),c=a.n(r),o=a(1),i=a(3);a(27);var l=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),l=Object(i.a)(c,2),m=l[0],p=l[1],u=Object(n.useState)(!1),d=Object(i.a)(u,2),g=d[0],_=d[1],h=Object(n.useState)(!0),E=Object(i.a)(h,2),f=E[0],v=E[1],b=Object(n.useState)(!1),y=Object(i.a)(b,2),N=y[0],S=y[1],w=Object(n.useState)(!1),j=Object(i.a)(w,2),O=j[0],k=j[1];Object(n.useEffect)((function(){sessionStorage.getItem("isLoggedIn")||sessionStorage.clear()}),[]);var I=function(e){switch(e.target.name){case"email":r(e.target.value);break;case"password":p(e.target.value)}},C=function(e){13===e.keyCode&&T()},T=function(){_(!0),D({email:a,password:m}).then((function(e){200===e.status?(sessionStorage.setItem("access-token",e.headers.get("access-token")),sessionStorage.setItem("client",e.headers.get("client")),sessionStorage.setItem("uid",e.headers.get("uid")),sessionStorage.setItem("isLoggedIn",!0),S(!0)):k(!0)}))},D=function(e){return new Promise((function(t,a){var n=new Headers;n.append("Content-Type","application/json"),n.append("Access-Control-Allow-Origin","*");var s={method:"POST",headers:n,body:JSON.stringify({email:"".concat(e.email),password:"".concat(e.password)}),redirect:"follow"};fetch("".concat("https://cors-anywhere.herokuapp.com/").concat("https://empresas.ioasys.com.br/api/v1","/users/auth/sign_in"),s).then((function(e){_(!1),t(e)})).catch((function(e){_(!1),k(!0),a(e)}))}))};return sessionStorage.getItem("isLoggedIn")||!0===N?s.a.createElement(o.a,{to:"/home"}):s.a.createElement("div",{className:"sign-in"},s.a.createElement("form",{className:g?"sign-in__form --blured":"sign-in__form"},s.a.createElement("div",{className:"sign-in__logo"}),s.a.createElement("div",{className:"sign-in__description-container"},s.a.createElement("div",{className:"sign-in__description"},s.a.createElement("div",{className:"sign-in__description-title"},s.a.createElement("p",null,"BEM-VINDO AO EMPRESAS")),s.a.createElement("div",{className:"sign-in__description-text"},s.a.createElement("p",null,"Lorem ipsum dolor sit amet, contetur adipiscing elit. Nunc accumsan.")))),s.a.createElement("div",{className:"sign-in__input-container"},s.a.createElement("div",{className:"sign-in__input",style:{borderBottom:O?".01vh solid #ff0f44":""}},s.a.createElement("label",{className:"sign-in__input-label --email",htmlFor:"email"}),s.a.createElement("input",{className:"sign-in__input-email",name:"email",type:"text",placeholder:"E-mail",autoComplete:"off",onChange:I,onKeyDown:C}),s.a.createElement("div",{className:O?"sign-in__input-status":"sign-in__input-status --invisible"},"!"))),s.a.createElement("div",{className:"sign-in__input-container"},s.a.createElement("div",{className:"sign-in__input",style:{borderBottom:O?".01vh solid #ff0f44":""}},s.a.createElement("label",{className:"sign-in__input-label --password",htmlFor:"password"}),s.a.createElement("input",{className:"sign-in__input-password",name:"password",type:f?"password":"text",placeholder:"Password",autoComplete:"off",onChange:I,onKeyDown:C}),s.a.createElement("button",{className:O?"--hidden":"sign-in__input-reveal",onClick:function(e){e.preventDefault(),v(!0!==f)}}),s.a.createElement("div",{className:O?"sign-in__input-status":"--hidden"},"!"))),s.a.createElement("div",{className:O?"sign-in__input-feedback":"sign-in__input-feedback --invisible"},s.a.createElement("p",null,"Credenciais informadas s\xe3o inv\xe1lidas, tente novamente.")),s.a.createElement("input",{className:"sign-in__button",type:"button",value:"ENTRAR",onClick:T})),g?s.a.createElement("div",{className:"sign-in__loader"},s.a.createElement("div",{className:"sign-in__loader-spinner"})):"")},m=a(17),p=a(18),u=a(19),d=a(21),g=a(20);function _(e){return new Promise((function(t,a){var n=new Headers;n.append("Content-Type","application/json"),n.append("access-token","".concat(sessionStorage.getItem("access-token"))),n.append("client","".concat(sessionStorage.getItem("client"))),n.append("uid","".concat(sessionStorage.getItem("uid"))),n.append("Access-Control-Allow-Origin","*");var s={method:"GET",headers:n,redirect:"follow"};""!==e.nomeEmpresa&&null===e.tipoEmpresa?fetch("".concat("https://cors-anywhere.herokuapp.com/").concat("https://empresas.ioasys.com.br/api/v1","/enterprises?name=").concat(e.nomeEmpresa),s).then((function(e){t(e.json())})).catch((function(e){a(e)})):""===e.nomeEmpresa&&null!==e.tipoEmpresa?fetch("".concat("https://empresas.ioasys.com.br/api/v1","/enterprises?enterprise_types=").concat(e.tipoEmpresa),s).then((function(e){t(e.json())})).catch((function(e){a(e)})):""!==e.nomeEmpresa&&null!==e.tipoEmpresa&&fetch("".concat("https://empresas.ioasys.com.br/api/v1","/enterprises?enterprise_types=").concat(e.tipoEmpresa,"&name=").concat(e.nomeEmpresa),s).then((function(e){t(e.json())})).catch((function(e){a(e)}))}))}a(33);var h=function(e){Object(d.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).enterpriseTypeData=[],n.setButtonState=function(e){e.preventDefault(),n.setState({selectedType:e.target.name}),sessionStorage.setItem("enterpriseTypeValue",e.target.value)},n.getEnterpriseTypes=function(){for(var e=1;e<25;e++)_({nomeEmpresa:"",tipoEmpresa:e}).then((function(e){n.sortEnterpriseTypes(e)}))},n.sortEnterpriseTypes=function(e){var t=e.enterprises[0].enterprise_type.id,a=e.enterprises[0].enterprise_type.enterprise_type_name;n.enterpriseTypeData[t]=a,n.setState(Object(m.a)({enterpriseTypes:n.enterpriseTypeData},"button".concat(t),!1))},n.state={enterpriseTypes:[],selectedType:""},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getEnterpriseTypes()}},{key:"render",value:function(){var e=this;return s.a.createElement("ul",{className:"carousel"},this.state.enterpriseTypes.map((function(t,a){return s.a.createElement("button",{className:e.state.selectedType==="button".concat(a)?"carousel__button --active":"carousel__button",name:"button".concat(a),type:"button",value:a,key:a,onClick:e.setButtonState},t)})))}}]),a}(n.Component),E=a(7);a(34);var f=function(e){var t=[];return!0===e.isSearched?(t=e.responseData.enterprises).length>0?s.a.createElement("ul",{className:"enterprises"},t.map((function(e,t){return s.a.createElement(E.b,{className:"enterprise__button",key:t,onClick:function(){return function(e){var t=e;sessionStorage.setItem("selectedEnterpriseIndex",t)}(e.id)},to:"/empresa/".concat(e.id)},s.a.createElement("div",{className:"enterprise__button-logo"},e.id),s.a.createElement("div",{className:"enterprise__button-info"},s.a.createElement("p",{className:"enterprise__button-name"},e.enterprise_name),s.a.createElement("p",{className:"enterprise__button-type"},e.enterprise_type.enterprise_type_name),s.a.createElement("p",{className:"enterprise__button-country"},e.city)))}))):s.a.createElement("div",{className:"search"},s.a.createElement("p",{className:"search__notfound"},"Nenhuma empresa foi encontrada para a busca realizada.")):s.a.createElement("div",{className:"search"},s.a.createElement("p",{className:"search__start"},"Clique na busca para iniciar."))};a(35);var v=function(){var e=Object(n.useState)({}),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),l=Object(i.a)(c,2),m=l[0],p=l[1],u=Object(n.useState)(!1),d=Object(i.a)(u,2),g=d[0],E=d[1],v=Object(n.useState)(!1),b=Object(i.a)(v,2),y=b[0],N=b[1],S=Object(n.useState)(!1),w=Object(i.a)(S,2),j=w[0],O=w[1],k={nomeEmpresa:"",tipoEmpresa:null};Object(n.useEffect)((function(){sessionStorage.removeItem("enterpriseTypeValue"),sessionStorage.removeItem("selectedEnterpriseIndex")}),[]);var I=function(e){switch(k={nomeEmpresa:m,tipoEmpresa:sessionStorage.getItem("enterpriseTypeValue")},13===e.keyCode&&C(k),e.target.value){case"showInput":E(!0);break;case"search":e.preventDefault(),C(k);break;case"close":e.preventDefault(),E(!1)}},C=function(){N(!0),_(k).then((function(e){r(e),N(!1),O(!0)}))};return sessionStorage.getItem("isLoggedIn")?s.a.createElement("div",{className:"home"},s.a.createElement("div",{className:"navbar"},s.a.createElement("div",{className:g?"navbar__input --input-mode":"navbar__input"},s.a.createElement("button",{className:g?"--hidden":"navbar__sing-out",onClick:function(e){e.preventDefault(),sessionStorage.clear(),window.location.reload(!1)}}),s.a.createElement("div",{className:g?"--hidden":"navbar__logo"}),s.a.createElement("button",{className:"filter__button --search ",value:g?"search":"showInput",onClick:I}),s.a.createElement("input",{className:g?"filter__search":"--hidden",name:"nomeEmpresa",type:"text",placeholder:"Pesquisar",spellCheck:"false",onKeyDown:function(e){p(e.target.value),13===e.keyCode&&I(e)}}),s.a.createElement("button",{className:g?"filter__button --close ":"--hidden",value:"close",onClick:I}))),s.a.createElement(h,null),s.a.createElement(f,{responseData:a,isSearching:y,isSearched:j})):s.a.createElement(o.a,{to:"/login"})};a(36);var b=function(){var e=Object(n.useState)({}),t=Object(i.a)(e,2),a=t[0],r=t[1];Object(n.useEffect)((function(){sessionStorage.getItem("isLoggedIn")&&c()}),[]);var c=function(){var e,t=sessionStorage.getItem("selectedEnterpriseIndex");(e=t,new Promise((function(t,a){var n=new Headers;n.append("Access-Control-Allow-Origin","*"),n.append("Content-Type","application/json"),n.append("access-token","".concat(sessionStorage.getItem("access-token"))),n.append("client","".concat(sessionStorage.getItem("client"))),n.append("uid","".concat(sessionStorage.getItem("uid")));var s={method:"GET",headers:n,redirect:"follow"};fetch("".concat("https://cors-anywhere.herokuapp.com/").concat("https://cors-anywhere.herokuapp.com/").concat("https://empresas.ioasys.com.br/api/v1","/enterprises/").concat(e),s).then((function(e){t(e.json())})).catch((function(e){a(e)}))}))).then((function(e){r(e.enterprise)}))};return sessionStorage.getItem("isLoggedIn")?s.a.createElement("div",{className:"result"},s.a.createElement("div",{className:"result__navbar"},s.a.createElement(E.b,{className:"result__backtrack",to:"/home"}),s.a.createElement("div",{className:"result__enterprise-name"},a.enterprise_name)),s.a.createElement("div",{className:"result__description"},s.a.createElement("div",{className:"result__description-thumbnail"},s.a.createElement("span",null,a.enterprise_name)),s.a.createElement("div",{className:"result__description-text"},s.a.createElement("p",null,a.description)))):s.a.createElement(o.a,{to:"/login"})};a(37);var y=function(){return s.a.createElement("main",null,s.a.createElement(o.d,null,s.a.createElement(o.b,{exact:!0,path:"/",component:l}),s.a.createElement(o.b,{exact:!0,path:"/login",component:l}),s.a.createElement(o.b,{exact:!0,path:"/home",component:v}),s.a.createElement(o.b,{path:"/empresa/:empresaId",component:b})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(38);c.a.render(s.a.createElement(E.a,null,s.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.e05c27d0.chunk.js.map